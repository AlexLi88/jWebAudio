<html>
    <head>
        <link href="../common.css" rel="stylesheet" type="text/css" />
        <link href="../../examples/css/shCore.css" rel="stylesheet" type="text/css" />
        <link href="../../examples/css/shThemeDjango.css" rel="stylesheet" type="text/css" />
        
        <script type="text/javascript" src="../../examples/js/shCore.js"></script>
        <script type="text/javascript" src="../../examples/js/shBrushJScript.js"></script>
        
        <script type="text/javascript" src="../../build/standard.jWebAudio.min.js"></script>
        
        <script type="text/javascript">
            var source = null;
            var effect = null;
            var v = {
                x: 0,
                y: 0,
                z: 0
            };
            
            function onload() {
                var engine = new jWebAudio.SoundEngine();
                source = engine.addSoundSource({
                    'url': '../../examples/resource/a.ogg',
                    'preLoad': true,
                    'callback': function() {
                        source.sound.play();
                        var id = source.sound.addEffect(
                                new jWebAudio.Spatiality());
                        effect = source.sound.getEffect(id);
                        
                        // enable UI
                        var input = document.getElementsByTagName('input');
                        for (var i in input) {
                            input[i].disabled = false;
                        }
                    }
                });
            }
            
            function xChange() {
                var x = document.getElementById('xInput').value;
                document.getElementById('xLabel').innerHTML = x;
                v.x = parseFloat(x);
                effect.soundObject.setVelocity(v.x, v.y, v.z);
            }
            
            function yChange() {
                var y = document.getElementById('yInput').value;
                document.getElementById('yLabel').innerHTML = y;
                v.y = parseFloat(y);
                effect.soundObject.setVelocity(v.x, v.y, v.z);
            }
            
            function zChange() {
                var z = document.getElementById('zInput').value;
                document.getElementById('zLabel').innerHTML = z;
                v.z = parseFloat(z);
                effect.soundObject.setVelocity(v.x, v.y, v.z);
            }
            
            SyntaxHighlighter.all();
        </script>
    </head>
    
    <body onload="onload();">
        <div id="content">
            <div id="panel">
                <input id="xInput" type="range" min="-0.1" max="0.1" step="0.005" value="0" onchange="xChange()" disabled="true" />
                X:<label id="xLabel">0</label><br>
                
                <input id="yInput" type="range" min="-0.1" max="0.1" step="0.005" value="0" onchange="yChange()" disabled="true" />
                Y:<label id="yLabel">0</label><br>
                
                <input id="zInput" type="range" min="-0.1" max="0.1" step="0.005" value="0" onchange="zChange()" disabled="true" />
                Z:<label id="zLabel">0</label><br>
            </div>
            
            <div class="title">Description:</div>
            Set velocity of 3D Effect.
            
            <div class="title">Result:</div>
            Doppler effect change with value of x, y and z input.
            
            <div class="title">Code:</div>
            <pre class="brush: js; highlight: [33, 40, 47]; toolbar: false;">
            var source = null;
            var effect = null;
            var v = {
                x: 0,
                y: 0,
                z: 0
            };
            
            function onload() {
                var engine = new jWebAudio.SoundEngine();
                source = engine.addSoundSource({
                    'url': '../../examples/resource/a.ogg',
                    'preLoad': true,
                    'callback': function() {
                        source.sound.play();
                        var id = source.sound.addEffect(
                                new jWebAudio.Spatiality());
                        effect = source.sound.getEffect(id);
                        
                        // enable UI
                        var input = document.getElementsByTagName('input');
                        for (var i in input) {
                            input[i].disabled = false;
                        }
                    }
                });
            }
            
            function xChange() {
                var x = document.getElementById('xInput').value;
                document.getElementById('xLabel').innerHTML = x;
                v.x = parseInt(x);
                effect.soundObject.setVelocity(v.x, v.y, v.z);
            }
            
            function yChange() {
                var y = document.getElementById('yInput').value;
                document.getElementById('yLabel').innerHTML = y;
                v.y = parseInt(y);
                effect.soundObject.setVelocity(v.x, v.y, v.z);
            }
            
            function zChange() {
                var z = document.getElementById('zInput').value;
                document.getElementById('zLabel').innerHTML = z;
                v.z = parseInt(z);
                effect.soundObject.setVelocity(v.x, v.y, v.z);
            }
            </pre>
        </div>
    </body>
</html>
